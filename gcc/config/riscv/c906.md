
(define_automaton "c906")

(define_cpu_unit "c906_alu_ex1" "c906")
(define_cpu_unit "c906_bju_ex1" "c906")
(define_cpu_unit "c906_mul_ex1, c906_mul_ex2, c906_mul_ex3" "c906")
(define_cpu_unit "c906_div_ex1" "c906")
(define_cpu_unit "c906_cp0_ex1" "c906")
(define_cpu_unit "c906_lsu_ag, c906_lsu_dc, c906_lsu_da" "c906")

(define_reservation "c906_alu_cycle" "c906_alu_ex1")
(define_reservation "c906_bju_cycle" "c906_bju_ex1")
(define_reservation "c906_mul_cycle"
		    "c906_mul_ex1, c906_mul_ex2, c906_mul_ex3")
(define_reservation "c906_cp0_cycle" "c906_cp0_ex1")
(define_reservation "c906_cp0_v_cycle" "c906_cp0_ex1")

;; div : 5-36 cycle
(define_reservation "c906_div_cycle" "c906_div_ex1 * 20")

(define_reservation "c906_lsu_1_cycle" "c906_lsu_ag")
(define_reservation "c906_lsu_2_cycle" "c906_lsu_ag, c906_lsu_dc")

(define_reservation "c906_lsu_1_f_cycle" "c906_lsu_ag")
(define_reservation "c906_lsu_3_f_cycle" "c906_lsu_ag, c906_lsu_dc, c906_lsu_da")

;;
;; scalar integer

(define_insn_reservation "c906_alu" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "arith,shift,logical,mtc,mfc,move,slt,multi,nop,ghost,const"))
  "c906_alu_cycle")

(define_insn_reservation "c906_bju" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "branch,jump,call"))
  "c906_bju_cycle")

(define_insn_reservation "c906_mul" 3
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "imul"))
  "c906_mul_cycle")

(define_insn_reservation "c906_div" 20
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "idiv"))
  "c906_div_cycle")

;; ld/st/set

(define_insn_reservation "c906_cp0" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "ebreak"))
  "c906_cp0_cycle")

(define_insn_reservation "c906_cp0_v" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "vset"))
  "c906_cp0_v_cycle")

(define_insn_reservation "c906_lsu_1" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "store"))
  "c906_lsu_1_cycle")

(define_insn_reservation "c906_lsu_1_f" 1
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fpstore"))
  "c906_lsu_1_f_cycle")

(define_insn_reservation "c906_lsu_2" 2
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "load"))
  "c906_lsu_2_cycle")

(define_insn_reservation "c906_lsu_3" 2
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fpload"))
  "c906_lsu_3_f_cycle")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(define_automaton "c906_float")

(define_cpu_unit "c906_vid, c906_vfex1, c906_vfex2, c906_vfex3, c906_vfex4, c906_vfex5" "c906_float")
(define_cpu_unit "c906_fdiv" "c906_float")

(define_reservation "c906_vfpu_1_cycle" "c906_vfex1, c906_vfex2, c906_vfex3")
(define_reservation "c906_vfpu_2_cycle" "c906_vfex1, c906_vfex2, c906_vfex3, c906_vfex4")
(define_reservation "c906_vfpu_3_cycle"
		    "c906_vfex1, c906_vfex2, c906_vfex3, c906_vfex4, c906_vfex5")
(define_reservation "c906_vfpu_4_cycle" "c906_vid, c906_vfex1, c906_vfex2, c906_vfex3")

;; fdiv : 5-12/18/33  cycle
(define_reservation "c906_fdiv_cycle" "c906_fdiv * 18")

;;
;; scalar fp

(define_insn_reservation "c906_vfpu_saddsign" 3
  (and (eq_attr "tune" "c906")
       (ior (and (eq_attr "type" "fadd")
		 (eq_attr "mode" "HF,SF"))
	    (eq_attr "type" "fsgnj")))
  "c906_vfpu_1_cycle")

(define_insn_reservation "c906_vfpu_dadd" 4
  (and (eq_attr "tune" "c906")
       (and (eq_attr "type" "fadd")
	    (eq_attr "mode" "DF")))
  "c906_vfpu_2_cycle")

(define_insn_reservation "c906_vfpu_move" 4
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fmove"))
  "c906_vfpu_4_cycle")

(define_insn_reservation "c906_vfpu_cvt" 3
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fcvt"))
  "c906_vfpu_1_cycle")

(define_insn_reservation "c906_vfpu_cmpcvti" 4
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fcmp,fcvt_i"))
  "c906_vfpu_4_cycle")

(define_insn_reservation "c906_vfpu_smul" 3
  (and (eq_attr "tune" "c906")
       (and (eq_attr "type" "fmul")
	    (eq_attr "mode" "HF,SF")))
  "c906_vfpu_1_cycle")

(define_insn_reservation "c906_vfpu_dmul" 4
  (and (eq_attr "tune" "c906")
       (and (eq_attr "type" "fmul")
	    (eq_attr "mode" "DF")))
  "c906_vfpu_2_cycle")

(define_insn_reservation "c906_vfpu_smadd" 4
  (and (eq_attr "tune" "c906")
       (and (eq_attr "type" "fmadd")
	    (eq_attr "mode" "HF,SF")))
  "c906_vfpu_2_cycle")

(define_insn_reservation "c906_vfpu_dmadd" 5
  (and (eq_attr "tune" "c906")
       (and (eq_attr "type" "fmadd")
	    (eq_attr "mode" "DF")))
  "c906_vfpu_3_cycle")

(define_insn_reservation "c906_vfpu_div" 18
  (and (eq_attr "tune" "c906")
       (eq_attr "type" "fdiv,fsqrt"))
  "c906_fdiv_cycle")
