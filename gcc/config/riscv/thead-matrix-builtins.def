/* Builtins macros for Thead Matrix Extension for GNU compiler.

   Copyright (C) 2022-2024 Free Software Foundation, Inc.
   Contributed by Jin Ma <jinma@linux.alibaba.com>,
   Alibaba Damo Academy Xuantie Team.

   This file is part of GCC.

   GCC is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3, or (at your option)
   any later version.

   GCC is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with GCC; see the file COPYING3.  If not see
   <http://www.gnu.org/licenses/>.  */

#define RISCV_TH_NAMED(INSN, NAME, BUILTIN_TYPE, FUNCTION_TYPE, AVAIL)		\
  { CODE_FOR_ ## INSN, "__riscv_th_" NAME, BUILTIN_TYPE, FUNCTION_TYPE, riscv_builtin_avail_ ## AVAIL, NULL}

#define DIRECT_TH_NAMED(INSN, NAME, FUNCTION_TYPE, AVAIL)			\
  RISCV_TH_NAMED (INSN, #NAME, RISCV_BUILTIN_DIRECT, FUNCTION_TYPE, AVAIL)

#define DIRECT_TH_NAMED_NO_TARGET(INSN, NAME, FUNCTION_TYPE, AVAIL)			\
  RISCV_TH_NAMED (INSN, #NAME, RISCV_BUILTIN_DIRECT_NO_TARGET, FUNCTION_TYPE, AVAIL)

#define RISCV_TH_NAMED_WITH_CHECKER(INSN, NAME, BUILTIN_TYPE, FUNCTION_TYPE, AVAIL, CHECKER)	\
  { CODE_FOR_ ## INSN, "__riscv_th_" NAME,			\
    BUILTIN_TYPE, FUNCTION_TYPE, riscv_builtin_avail_ ## AVAIL, check_ ## CHECKER}

#define DIRECT_TH_NAMED_WITH_CHECKER(INSN, NAME, FUNCTION_TYPE, AVAIL, CHECKER)			\
  RISCV_TH_NAMED_WITH_CHECKER (INSN, #NAME, RISCV_BUILTIN_DIRECT, FUNCTION_TYPE, AVAIL, CHECKER)

DIRECT_NAMED(matrix_mcfgm, msetmrow_m, RISCV_USI_FTYPE_UQI, matrix),
DIRECT_NAMED(matrix_mcfgn, msetmrow_n, RISCV_USI_FTYPE_UQI, matrix),
DIRECT_NAMED(matrix_mcfgk, msetmcol, RISCV_USI_FTYPE_UHI, matrix),

DIRECT_TH_NAMED(matrix_read_xmlenb, xmlenb, RISCV_USI_FTYPE, matrix_rv32),
DIRECT_TH_NAMED(matrix_read_xmlenb, xmlenb, RISCV_UDI_FTYPE, matrix_rv64),
DIRECT_TH_NAMED(matrix_read_xrlenbsi, xrlenb, RISCV_USI_FTYPE, matrix_rv32),
DIRECT_TH_NAMED(matrix_read_xrlenbdi, xrlenb, RISCV_UDI_FTYPE, matrix_rv64),
DIRECT_TH_NAMED(matrix_read_xmsizesi, xmsize, RISCV_USI_FTYPE, matrix_rv32),
DIRECT_TH_NAMED(matrix_read_xmsizedi, xmsize, RISCV_UDI_FTYPE, matrix_rv64),

DIRECT_TH_NAMED_NO_TARGET(matrix_mrelease, mrelease, RISCV_VOID_FTYPE, matrix),

#define __MATRIX_ALL_TYPE_ITERATOR(MACRO, ...)		\
  MACRO(di, i64,  DI, __VA_ARGS__)		\
  MACRO(si, i32,  SI, __VA_ARGS__)		\
  MACRO(hi, i16,  HI, __VA_ARGS__)		\
  MACRO(qi, i8,   QI, __VA_ARGS__)		\
  MACRO(di, u64, UDI, __VA_ARGS__)		\
  MACRO(si, u32, USI, __VA_ARGS__)		\
  MACRO(hi, u16, UHI, __VA_ARGS__)		\
  MACRO(qi, u8,  UQI, __VA_ARGS__)		\
  MACRO(df, f64,  DF, __VA_ARGS__)		\
  MACRO(sf, f32,  SF, __VA_ARGS__)		\
  MACRO(hf, f16,  HF, __VA_ARGS__)

#define __MATRIX_UNDEFINED_AND_ZERO_DIRECT(mode, type, TYPE, lmul)								\
  DIRECT_TH_NAMED (matrix_mundefinedrvmm1##mode, mundefined_##type, RISCV_RVMM##lmul##TYPE##_FTYPE, matrix),				\
  DIRECT_TH_NAMED(matrix_mzerorvmm1##mode, mzero_##type, RISCV_RVMM##lmul##TYPE##_FTYPE, matrix),

#define __MATRIX_UNDEFINED_AND_ZERO_DIRECT_X(mode, type, TYPE, lmul)								\
  DIRECT_TH_NAMED (matrix_mundefinedrvmm##lmul##mode, mundefined_##type##x##lmul, RISCV_RVMM##lmul##TYPE##_FTYPE, matrix),	\
  DIRECT_TH_NAMED(matrix_mzerorvmm##lmul##mode, mzero_##type##x##lmul, RISCV_RVMM##lmul##TYPE##_FTYPE, matrix),

__MATRIX_ALL_TYPE_ITERATOR(__MATRIX_UNDEFINED_AND_ZERO_DIRECT, 1)
__MATRIX_ALL_TYPE_ITERATOR(__MATRIX_UNDEFINED_AND_ZERO_DIRECT_X, 2)
__MATRIX_ALL_TYPE_ITERATOR(__MATRIX_UNDEFINED_AND_ZERO_DIRECT_X, 4)
__MATRIX_ALL_TYPE_ITERATOR(__MATRIX_UNDEFINED_AND_ZERO_DIRECT_X, 8)

#define __MATRIX_LOAD_AND_STORE_DIRECT(mode, type, RETURN, ARGS)									\
  DIRECT_NAMED (matrix_mld## mode ##di, mld_##type, RISCV_## RETURN ##_FTYPE_## ARGS ##_DI_UQI_UHI, matrix_rv64),			\
  DIRECT_NAMED (matrix_mld## mode ##si, mld_##type, RISCV_## RETURN ##_FTYPE_## ARGS ##_SI_UQI_UHI, matrix_rv32),			\
  DIRECT_NAMED_NO_TARGET (matrix_mst## mode ##di, mst_##type, RISCV_VOID_FTYPE_## ARGS ##_DI_## RETURN ##_UQI_UHI, matrix_rv64),	\
  DIRECT_NAMED_NO_TARGET (matrix_mst## mode ##si, mst_##type, RISCV_VOID_FTYPE_## ARGS ##_SI_## RETURN ##_UQI_UHI, matrix_rv32),	\
																	\
  DIRECT_NAMED (matrix_msld## mode ##di, msld_##type, RISCV_## RETURN ##_FTYPE_## ARGS ##_DI_UQI_UHI, matrix_rv64),			\
  DIRECT_NAMED (matrix_msld## mode ##si, msld_##type, RISCV_## RETURN ##_FTYPE_## ARGS ##_SI_UQI_UHI, matrix_rv32),			\
  DIRECT_NAMED_NO_TARGET (matrix_msst## mode ##di, msst_##type, RISCV_VOID_FTYPE_## ARGS ##_DI_## RETURN ##_UQI_UHI, matrix_rv64),	\
  DIRECT_NAMED_NO_TARGET (matrix_msst## mode ##si, msst_##type, RISCV_VOID_FTYPE_## ARGS ##_SI_## RETURN ##_UQI_UHI, matrix_rv32),

__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1di, i64, RVMM1DI, C_DI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1si, i32, RVMM1SI, C_SI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1hi, i16, RVMM1HI, C_HI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1qi, i8, RVMM1QI, C_QI_PTR)

__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1di, u64, RVMM1UDI, C_UDI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1si, u32, RVMM1USI, C_USI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1hi, u16, RVMM1UHI, C_UHI_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1qi, u8, RVMM1UQI, C_UQI_PTR)

__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1df, f64, RVMM1DF, C_DF_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1sf, f32, RVMM1SF, C_SF_PTR)
__MATRIX_LOAD_AND_STORE_DIRECT(rvmm1hf, f16, RVMM1HF, C_HF_PTR)

#define __MATRIX_INT_ITERATOR(MACRO, ...)			\
  MACRO(rvmm1qi, i8,  QI, QI, __VA_ARGS__)			\
  MACRO(rvmm1hi, i16, HI, HI, __VA_ARGS__)			\
  MACRO(rvmm1si, i32, SI, SI, __VA_ARGS__)			\
  MACRO(rvmm1di, i64, DI, DI, __VA_ARGS__)			\
  MACRO(rvmm1qi, u8,  UQI, UQI, __VA_ARGS__)			\
  MACRO(rvmm1hi, u16, UHI, UHI, __VA_ARGS__)			\
  MACRO(rvmm1si, u32, USI, USI, __VA_ARGS__)			\
  MACRO(rvmm1di, u64, UDI, UDI, __VA_ARGS__)

#define __MATRIX_MOV_DIRECT(mode, type, RETURN, ARGS, instr)										\
  DIRECT_TH_NAMED (mov## mode,	     mmov_mm_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN, matrix),				\
  DIRECT_TH_NAMED (matrix_mmov_mv## mode,  mmov_mv_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_UQI, matrix),			\
  DIRECT_TH_NAMED (matrix_mmov_m_x## mode, mmov_m_x_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_## ARGS ##_UQI, matrix),	\
  DIRECT_TH_NAMED (matrix_mmov_x_m## mode, mmov_x_m_## type, RISCV_## ARGS ##_FTYPE_RVMM1## RETURN ##_UQI, matrix),			\
  DIRECT_TH_NAMED (matrix_mdup_m_x## mode, mdup_m_x_## type, RISCV_RVMM1## RETURN ##_FTYPE_## ARGS, matrix),

__MATRIX_INT_ITERATOR(__MATRIX_MOV_DIRECT, mmov)

#define __MATRIX_FLOAT_ITERATOR(MACRO, ...)			\
  MACRO(rvmm1hf, f16, HF, HF, __VA_ARGS__)			\
  MACRO(rvmm1sf, f32, SF, SF, __VA_ARGS__)			\
  MACRO(rvmm1df, f64, DF, DF, __VA_ARGS__)

#define __MATRIX_MOV_FLAOT_DIRECT(mode, type, RETURN, ARGS, instr)										\
  DIRECT_TH_NAMED (mov## mode,	     mmov_mm_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN, matrix),				\
  DIRECT_TH_NAMED (matrix_mmov_mv## mode,  mmov_mv_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_UQI, matrix),

__MATRIX_FLOAT_ITERATOR(__MATRIX_MOV_FLAOT_DIRECT, mmov)

#define __MATRIX_SD_BULITINS_ITERATOR(MACRO, ...)			\
  MACRO(rvmm1si, i32, SI, SI, __VA_ARGS__)				\
  MACRO(rvmm1di, i64, DI, DI, __VA_ARGS__)				\
  MACRO(rvmm1si, u32, USI, USI, __VA_ARGS__)				\
  MACRO(rvmm1di, u64, UDI, UDI, __VA_ARGS__)

#define __MATRIX_AUL_DIRECT(mode, type, RETURN, ARGS, instr)													\
  DIRECT_NAMED (matrix_## instr ##_mm## mode, instr ##_mm_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_RVMM1##  RETURN ##_UQI_UHI, matrix),		\
  DIRECT_NAMED (matrix_## instr ##_mv## mode, instr ##_mv_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_RVMM1##  RETURN ##_UQI_UQI_UHI, matrix),		\
  DIRECT_NAMED (matrix_## instr ##_mx## mode, instr ##_mx_## type, RISCV_RVMM1## RETURN ##_FTYPE_RVMM1## RETURN ##_## ARGS ##_UQI_UHI, matrix),

__MATRIX_SD_BULITINS_ITERATOR(__MATRIX_AUL_DIRECT, madd)
__MATRIX_SD_BULITINS_ITERATOR(__MATRIX_AUL_DIRECT, msub)
__MATRIX_SD_BULITINS_ITERATOR(__MATRIX_AUL_DIRECT, mmul)
__MATRIX_SD_BULITINS_ITERATOR(__MATRIX_AUL_DIRECT, mmulh)

#define __MATRIX_SHIFT_DIRECT(instr, mode, type, RETURN, ARGS1, ARGS2)									\
  DIRECT_NAMED (matrix_## instr ##_mm## mode, instr ##_mm_## type, RISCV_## RETURN ##_FTYPE_## ARGS1 ##_UQI_UHI, matrix),		\
  DIRECT_NAMED (matrix_## instr ##_mv## mode, instr ##_mv_## type, RISCV_## RETURN ##_FTYPE_## ARGS1 ##_UQI_UQI_UHI, matrix),		\
  DIRECT_NAMED (matrix_## instr ##_mx## mode, instr ##_mx_## type, RISCV_## RETURN ##_FTYPE_## ARGS2 ##_UQI_UHI, matrix),

__MATRIX_SHIFT_DIRECT(msra, rvmm1si, i32, RVMM1SI, RVMM1SI_RVMM1USI, RVMM1SI_USI)
__MATRIX_SHIFT_DIRECT(msra, rvmm1di, i64, RVMM1DI, RVMM1DI_RVMM1UDI, RVMM1DI_UDI)

__MATRIX_SHIFT_DIRECT(mn4clip, rvmm1si, i32, RVMM1QI, RVMM1SI_RVMM1USI, RVMM1SI_USI)
__MATRIX_SHIFT_DIRECT(mn4clip, rvmm1di, i64, RVMM1QI, RVMM1DI_RVMM1UDI, RVMM1DI_UDI)

__MATRIX_SHIFT_DIRECT(mn4clipu, rvmm1si, u32, RVMM1UQI, RVMM1USI_RVMM1USI, RVMM1USI_USI)
__MATRIX_SHIFT_DIRECT(mn4clipu, rvmm1di, u64, RVMM1UQI, RVMM1UDI_RVMM1UDI, RVMM1UDI_UDI)

DIRECT_NAMED (matrix_fmmacc_h, fmmacc_f16, RISCV_RVMM1HF_FTYPE_RVMM1HF_RVMM1HF_RVMM2HF_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_fmmacc_s, fmmacc_f32, RISCV_RVMM1SF_FTYPE_RVMM1SF_RVMM1SF_RVMM1SF_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_fmmacc_d, fmmacc_f64x2, RISCV_RVMM2DF_FTYPE_RVMM2DF_RVMM1DF_RVMM1DF_UQI_UQI_UHI, matrix),

DIRECT_NAMED (matrix_fwmmacc_h, fwmmacc_f32, RISCV_RVMM1SF_FTYPE_RVMM1SF_RVMM1HF_RVMM1HF_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_fwmmacc_s, fwmmacc_f64x2, RISCV_RVMM2DF_FTYPE_RVMM2DF_RVMM1SF_RVMM1SF_UQI_UQI_UHI, matrix),

DIRECT_NAMED (matrix_mmaqa_b,   mmaqa_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1QI_RVMM1QI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqa_h,   mmaqa_i64x2, RISCV_RVMM2DI_FTYPE_RVMM2DI_RVMM1HI_RVMM1HI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqau_b,  mmaqau_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1UQI_RVMM1UQI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqau_h,  mmaqau_i64x2, RISCV_RVMM2DI_FTYPE_RVMM2DI_RVMM1UHI_RVMM1UHI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqaus_b, mmaqaus_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1UQI_RVMM1QI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqaus_h, mmaqaus_i64x2, RISCV_RVMM2DI_FTYPE_RVMM2DI_RVMM1UHI_RVMM1HI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqasu_b, mmaqasu_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1QI_RVMM1UQI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_mmaqasu_h, mmaqasu_i64x2, RISCV_RVMM2DI_FTYPE_RVMM2DI_RVMM1HI_RVMM1UHI_UQI_UQI_UHI, matrix),

DIRECT_NAMED (matrix_pmmaqa_b,   pmmaqa_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1QI_RVMM1QI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_pmmaqau_b,  pmmaqau_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1UQI_RVMM1UQI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_pmmaqaus_b, pmmaqaus_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1UQI_RVMM1QI_UQI_UQI_UHI, matrix),
DIRECT_NAMED (matrix_pmmaqasu_b, pmmaqasu_i32, RISCV_RVMM1SI_FTYPE_RVMM1SI_RVMM1QI_RVMM1UQI_UQI_UQI_UHI, matrix),

/* Matrix mreinterpret.  */
#define __MATRIX_MREINTERPRET_DIRECT(mode, type, ARGS)							\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1qi##mode, mreinterpret_i8_##type,  RISCV_RVMM1QI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1hi##mode, mreinterpret_i16_##type, RISCV_RVMM1HI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1si##mode, mreinterpret_i32_##type, RISCV_RVMM1SI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1di##mode, mreinterpret_i64_##type, RISCV_RVMM1DI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1qi##mode, mreinterpret_u8_##type,  RISCV_RVMM1UQI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1hi##mode, mreinterpret_u16_##type, RISCV_RVMM1UHI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1si##mode, mreinterpret_u32_##type, RISCV_RVMM1USI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1di##mode, mreinterpret_u64_##type, RISCV_RVMM1UDI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1hf##mode, mreinterpret_f16_##type, RISCV_RVMM1HF_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1sf##mode, mreinterpret_f32_##type, RISCV_RVMM1SF_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm1df##mode, mreinterpret_f64_##type, RISCV_RVMM1DF_FTYPE_## ARGS, matrix),

#define __MATRIX_MREINTERPRET_ITERATOR(MACRO, ...)		\
  MACRO(rvmm1qi, i8 , RVMM1QI)					\
  MACRO(rvmm1hi, i16, RVMM1HI)					\
  MACRO(rvmm1si, i32, RVMM1SI)					\
  MACRO(rvmm1di, i64, RVMM1DI)					\
  MACRO(rvmm1qi, u8 , RVMM1UQI)					\
  MACRO(rvmm1hi, u16, RVMM1UHI)					\
  MACRO(rvmm1si, u32, RVMM1USI)					\
  MACRO(rvmm1di, u64, RVMM1UDI)					\
  MACRO(rvmm1hf, f16, RVMM1HF)					\
  MACRO(rvmm1sf, f32, RVMM1SF)					\
  MACRO(rvmm1df, f64, RVMM1DF)

__MATRIX_MREINTERPRET_ITERATOR(__MATRIX_MREINTERPRET_DIRECT,)

#define __MATRIX_MREINTERPRET_X2_DIRECT(mode, type, ARGS)							\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2qi##mode, mreinterpret_i8x2_##type,  RISCV_RVMM2QI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2hi##mode, mreinterpret_i16x2_##type, RISCV_RVMM2HI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2si##mode, mreinterpret_i32x2_##type, RISCV_RVMM2SI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2di##mode, mreinterpret_i64x2_##type, RISCV_RVMM2DI_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2qi##mode, mreinterpret_u8x2_##type,  RISCV_RVMM2UQI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2hi##mode, mreinterpret_u16x2_##type, RISCV_RVMM2UHI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2si##mode, mreinterpret_u32x2_##type, RISCV_RVMM2USI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2di##mode, mreinterpret_u64x2_##type, RISCV_RVMM2UDI_FTYPE_## ARGS,  matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2hf##mode, mreinterpret_f16x2_##type, RISCV_RVMM2HF_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2sf##mode, mreinterpret_f32x2_##type, RISCV_RVMM2SF_FTYPE_## ARGS, matrix),	\
  DIRECT_TH_NAMED (matrix_mreinterpret_mrvmm2df##mode, mreinterpret_f64x2_##type, RISCV_RVMM2DF_FTYPE_## ARGS, matrix),

#define __MATRIX_MREINTERPRET_X2_ITERATOR(MACRO, ...)		\
  MACRO(rvmm2qi, i8x2 , RVMM2QI)					\
  MACRO(rvmm2hi, i16x2, RVMM2HI)					\
  MACRO(rvmm2si, i32x2, RVMM2SI)					\
  MACRO(rvmm2di, i64x2, RVMM2DI)					\
  MACRO(rvmm2qi, u8x2 , RVMM2UQI)					\
  MACRO(rvmm2hi, u16x2, RVMM2UHI)					\
  MACRO(rvmm2si, u32x2, RVMM2USI)					\
  MACRO(rvmm2di, u64x2, RVMM2UDI)					\
  MACRO(rvmm2hf, f16x2, RVMM2HF)					\
  MACRO(rvmm2sf, f32x2, RVMM2SF)					\
  MACRO(rvmm2df, f64x2, RVMM2DF)

__MATRIX_MREINTERPRET_X2_ITERATOR(__MATRIX_MREINTERPRET_X2_DIRECT,)

/* Matrix tuple.  */
#define __MATRIX_TUPLE_DIRECT(mode, type, RETURN, ARGS)									\
DIRECT_TH_NAMED_WITH_CHECKER (matrix_mset##mode, mset_##type, RISCV_## RETURN ##_FTYPE_## RETURN ##_SI_## ARGS, matrix_rv32, matrix_tuple_check),	\
DIRECT_TH_NAMED_WITH_CHECKER (matrix_mset##mode, mset_##type, RISCV_## RETURN ##_FTYPE_## RETURN ##_DI_## ARGS, matrix_rv64, matrix_tuple_check),	\
DIRECT_TH_NAMED_WITH_CHECKER (matrix_mget##mode, mget_##type, RISCV_## ARGS ##_FTYPE_## RETURN ##_SI, matrix_rv32, matrix_tuple_check),			\
DIRECT_TH_NAMED_WITH_CHECKER (matrix_mget##mode, mget_##type, RISCV_## ARGS ##_FTYPE_## RETURN ##_DI, matrix_rv64, matrix_tuple_check),

#define __MATRIX_TUPLE_ITERATOR(MACRO, ...)			\
  MACRO(rvmm2qi, i8x2,  RVMM2QI, RVMM1QI)			\
  MACRO(rvmm2hi, i16x2, RVMM2HI, RVMM1HI)			\
  MACRO(rvmm2si, i32x2, RVMM2SI, RVMM1SI)			\
  MACRO(rvmm2di, i64x2, RVMM2DI, RVMM1DI)			\
  MACRO(rvmm2qi, u8x2,  RVMM2UQI, RVMM1UQI)			\
  MACRO(rvmm2hi, u16x2, RVMM2UHI, RVMM1UHI)			\
  MACRO(rvmm2si, u32x2, RVMM2USI, RVMM1USI)			\
  MACRO(rvmm2di, u64x2, RVMM2UDI, RVMM1UDI)			\
  MACRO(rvmm2hf, f16x2, RVMM2HF, RVMM1HF)			\
  MACRO(rvmm2sf, f32x2, RVMM2SF, RVMM1SF)			\
  MACRO(rvmm2df, f64x2, RVMM2DF, RVMM1DF)			\

__MATRIX_TUPLE_ITERATOR(__MATRIX_TUPLE_DIRECT, )